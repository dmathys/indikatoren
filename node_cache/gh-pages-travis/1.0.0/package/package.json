{"name":"gh-pages-travis","version":"1.0.0","description":"CLI to deploy a folder to gh-pages branch of current repo as part of travis build","bin":{"gh-pages-travis":"./gh-pages-travis"},"repository":{"type":"git","url":"git+https://github.com/pghalliday/gh-pages-travis.git"},"keywords":["travis-ci","gh-pages","deploy"],"author":{"name":"Peter Halliday","email":"pghalliday@gmail.com"},"license":"ISC","bugs":{"url":"https://github.com/pghalliday/gh-pages-travis/issues"},"homepage":"https://github.com/pghalliday/gh-pages-travis","readme":"# gh-pages-travis\n\nCLI to deploy a folder to gh-pages branch of current repo as part of travis build\n\n## Usage\n\nInstall as a development dependency\n\n```\nnpm install --save-dev gh-pages-travis\n```\n\nAdd a script entry to `package.json` (npm puts the `node_modules/.bin` directory on the path when it runs scripts)\n\n```json\n{\n  \"scripts\": {\n    \"gh-pages-travis\": \"gh-pages-travis\"\n  }\n}\n```\n\nCreate your `gh-pages` branch and add the following `.travis.yml` to prevent travis from building it\n\n```yml\nbranches:\n  except:\n    - gh-pages\n```\n\nGenerate a deploy key for your Github repository\n\n```\nssh-keygen -t rsa -C \"your_email@example.com\"\n```\n\nThis will generate the `id_rsa` and `id_rsa.pub` files\n\n**Add `id_rsa.pub` as a deploy key for your Github repository**\n\nInstall the travis cli client\n\n```\ngem install travis\n```\n\nLogin the travis cli and encrypt the private key, `id_rsa`\n\n```\ntravis login\ntravis encrypt-file id_rsa --add\n```\n\nThis will add the decrypt command to recreate `id_rsa` in the current folder as a `before_install` script\n\n**NB. Make sure you delete the `id_rsa` and `id_rsa.pub` files and add the `id_rsa.enc` to the repository.**\n\nLastly update your `.travis.yml` to configure the script and run it after a successful build\n\n```yml\nafter_sucess:\n  - npm run gh-pages-travis\nenv:\n  global:\n    - SSH_KEY=\"id_rsa\"\n    - GIT_NAME=\"Peter Halliday\"\n    - GIT_EMAIL=\"pghalliday@gmail.com\"\n    - SOURCE_DIR=\"docs\"\n    - DEPLOY_BRANCH=\"master\"\n```\n\nThe `DEPLOY_BRANCH` setting ensures that the github pages are only deployed from builds of that branch\n","readmeFilename":"README.md","_id":"gh-pages-travis@1.0.0","_shasum":"6a7268572adc15cbb93caf27cb2f4655a9a891ef","_resolved":"file:node_shrinkwrap/gh-pages-travis-1.0.0.tar","_from":"node_shrinkwrap/gh-pages-travis-1.0.0.tar"}